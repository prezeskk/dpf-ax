This is rudimentary code to inject your own source into the AX206 based DPFs.
Update: Information about this chip is now available at openschemes.org.
Also, the full original SDK is published on their website, look for AX206.

NEW: 

The current developer distribution no longer uses the 'developer mode'
firmware hack. It now contains a fully featured environment to boot and
flash a AX206 based DPF.

----------------------------------------------------------------------------
DPF modes

You can run the DPF firmware in various modes and options:

- Boot Loader Mode: The DPF will be in this mode when you bricked the flash
  or when you press RESET while holding MENU. This is the preferred mode
  when flashing new firmware.
  In Boot loader mode, you can also download small binaries into RAM and run
  them without touching the flash. This is useful for development. See
  dpflib/bfload executable to download a RAM binary and run it.
- Developer Mode: hacked original firmware of a number of supported DPFs
  to support some extra features and lcd4linux
- New alternative firmware: Completely replaces internal firmware. This
  is for advanced users who have identified their LCD brand and know how
  to access it.


Before modifying any firmware, it is VERY recommended to make a backup of
the original flash content using the fulldump.py script.

----------------------------------------------------------------------------

The tar file contents are merely:

- libdpf: A library to access the DPF in various modes (Boot mode, SCSI,
  developer mode)
- Python wrapper around the above library
- Python scripts to patch various DPFs (listed in profiles.py) and other
  auxiliaries

Description of a few tools
---------------------------

app_detect.s, detect.py: Simple rudimentary detection for Sitronix/NXP
                         compatible LCD controllers and SPI flash chip.
fulldump.py:             Performs a dump of the flash according to detected
                         flash size (often specified wrong by vendor)

Developer Mode
---------------

When the unit is in Developer Mode, it registers itself as USB device with
the same VID:PID, but not as USB storage. This allows much faster access using
libusb and as non-root. However, the unit will still use USB storage SCSI
commands, see dpflib for the wrapping over libusb.

Specific commands are implemented using the handler for the SCSI command
0xcd, mode 6. These commands are handled on the DPF by cmdhandler.s
(up to v0.1alpha) and by dpflib/dpflib.c on the target.

Note that the protocol may change in future, once the internal firmware
is fully replaced by something more structured. Thus, you should implement
extras on the dpflib level only, never access USB directly.

Alternative firmware mode
--------------------------

This is for advanced users who wish to implement extra features for their
DPF. The source distribution starting from 0.2 only supports the
alternative firmware by default.

To build your firmware, configure your Makefile for the correct DPF
type and run "make". Then you can simply flash your DPF by putting it into
boot mode and run

restore.py fw_<your DPF type>.bin -f

You might have to press RESET to boot into your new firmware.

Prerequisites
--------------

You need:

- A proper Linux system with GCC, python-dev (libraries and headers to
  compilee your own modules)
Optionally:
- Possibly some knowledge of the 8051, if you want to mess around
- A working sdcc distribution including asx8051, aslink, etc.

Usage
------

1. run 'make' to build the tools and patches
2. Initiate USB connection from the DPF via the menu
3. Wait a while and check dmesg for the /dev/sgX assignment
4. Run 'python hackit.py /dev/sgX' as root (CAREFUL!!!) to probe for
   known DPFs and confirm that you wish to patch the DPF according to the
   instructions.

The hackit.py script checks for a valid DPF, so you can not accidentally
damage your hard disk. Also, it runs a crc32 check on critical modules
for more safety. DO NOT CHANGE the existing checksums. Only *add* new
profiles in profiles.py, don't EVER change existing ones.

Before messing around, you might want to dump the entire flash using the
fulldump.py script.

For those desiring to try adding hacks for other frame models, there is
now a short howto in the reverse/ folder.

----------------------------------------------------------------------------
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

WARNING: Do not modify the script unless you REALLY know what you are doing.

DISCLAIMER: There is no guarantee that you will not brick your DPF.
The Author(s) of this code take no responsibilities. You are completely on
your own there!
If you bricked your DPF: No worries, you can restore the old image using
the restore.py script (experimental) or the ProgSPI.exe Windows tool
found at openschemes.org.

LICENSE:
You are allowed to modify and distribute the code, as long as you keep it
OpenSource. We just trust you that you have a notion of fair usage :-)
You MAY NOT use this code commercially.

TODO:
1. Windows support, fully featured lcd4linux support via generic DPF library
   (I leave this to others. I hate Windows.)
2. Replace flash firmware with improved opensource environment

----------------------------------------------------------------------------

Find updates and documentation here:

http://tech.section5.ch/news/?p=77
(most up to date)

or here:

http://picframe.spritesserver.nl/wiki/index.php/DPF_with_AppoTech_AX206

----------------------------------------------------------------------------
