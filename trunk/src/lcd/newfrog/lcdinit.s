	.include 'dpf.inc'

	.area LCDAUX (CODE)

_lcd_custom_init::
	lcall	lcd_reset
;
	mov	dptr,#_custom_initseq
	ljmp	_lcd_init_by_table

;
; If custom backlight handling is needed, uncomment the following label
; and set LCD_BACKLIGHT_CUSTOM in dpfmodel.h
; r3 contains brightness value (0 .. LCD_MAX_BRIGHTNESS_VALUE)
;
_lcd_custom_setbacklight::
	anl	p2dir,#0xf7
	mov	a,r3
	jnz	backlight_on
	anl	p2,#0xf7
	ret
backlight_on:
	orl	p2,#0x08
	ret
;
; If custom contrast handling is needed, uncomment the following label
; and set LCD_CONTRAST_CUSTOM in dpfmodel.h
; r3 contains contrast value (1 .. LCD_MAX_CONTRAST_VALUE)
;
;_lcd_custom_setcontrast::

	.area LCDAUX (CODE)


;backlight_table::
;	.db	If needed, put data for custom backlight handling here
;_custom_backlighttbl_len::  .db  . - backlight_table


;contrast_table::
;	.db	If needed, put data for custom contrast handling here
;_custom_contrasttbl_len::  .db  . - contrast_table

;
; NOTE from identify.py: not used
;
;_custom_contrasttbl::
;	.db	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
;_custom_contrasttbl_len::  .db  7

;_custom_contrasttbl2::
;	.db	0x71, 0x00, 0x71, 0x13, 0x91, 0x0c, 0x91, 0x00, 0xff
;_custom_contrasttbl2_len::  .db  9

;_custom_contrasttbl2_offsets::
;	.db	0x07
;_custom_contrasttbl2_offsets_len::  .db  1

;
; NOTE from identify.py: not used
;
;_custom_backlighttbl::
;	.db	0x00, 0x0c, 0x18, 0x24, 0x30, 0x3c, 0x48, 0x54, 0x60, 0x6c
;	.db	0x78, 0x84, 0x90, 0x9c, 0xa8, 0xb4, 0xc0, 0xcc, 0xd8, 0xe4
;	.db	0xf0, 0xfc
;_custom_backlighttbl_len::  .db  22

;_custom_backlighttbl2::
;_custom_backlighttbl2_len::  .db  0

_custom_initseq::
	.db	0x00, 0xb0, 0x64, 0x11, 0xb0, 0x0a, 0x10, 0xb0, 0x64, 0x11
	.db	0xb0, 0xff, 0x71, 0x00, 0x71, 0x00, 0x91, 0x00, 0x91, 0x01
	.db	0x71, 0x00, 0x71, 0x01, 0x91, 0x00, 0x91, 0x00, 0x71, 0x00
	.db	0x71, 0x02, 0x91, 0x07, 0x91, 0x00, 0x71, 0x00, 0x71, 0x03
	.db	0x91, 0x10, 0x91, 0x98, 0x71, 0x00, 0x71, 0x04, 0x91, 0x00
	.db	0x91, 0x00, 0x71, 0x00, 0x71, 0x08, 0x91, 0x03, 0x91, 0x02
	.db	0x71, 0x00, 0x71, 0x09, 0x91, 0x00, 0x91, 0x00, 0x71, 0x00
	.db	0x71, 0x0a, 0x91, 0x00, 0x91, 0x00, 0x71, 0x00, 0x71, 0x0c
	.db	0x91, 0x00, 0x91, 0x00, 0x71, 0x00, 0x71, 0x0d, 0x91, 0x00
	.db	0x91, 0x00, 0x71, 0x00, 0x71, 0x0f, 0x91, 0x00, 0x91, 0x00
	.db	0x71, 0x00, 0x71, 0x10, 0x91, 0x10, 0x91, 0xe0, 0x71, 0x00
	.db	0x71, 0x10, 0x91, 0x12, 0x91, 0xb0, 0x71, 0x00, 0x71, 0x11
	.db	0x91, 0x00, 0x91, 0x07, 0x71, 0x00, 0x71, 0x12, 0x91, 0x00
	.db	0x91, 0x8c, 0x71, 0x00, 0x71, 0x13, 0x91, 0x15, 0x91, 0x00
	.db	0x71, 0x00, 0x71, 0x29, 0x91, 0x00, 0x91, 0x00, 0x71, 0x00
	.db	0x71, 0x30, 0x91, 0x00, 0x91, 0x00, 0x71, 0x00, 0x71, 0x31
	.db	0x91, 0x05, 0x91, 0x07, 0x71, 0x00, 0x71, 0x32, 0x91, 0x03
	.db	0x91, 0x03, 0x71, 0x00, 0x71, 0x36, 0x91, 0x00, 0x91, 0x04
	.db	0x71, 0x00, 0x71, 0x36, 0x91, 0x00, 0x91, 0x07, 0x71, 0x00
	.db	0x71, 0x37, 0x91, 0x00, 0x91, 0x00, 0x71, 0x00, 0x71, 0x38
	.db	0x91, 0x05, 0x91, 0x07, 0x71, 0x00, 0x71, 0x39, 0x91, 0x03
	.db	0x91, 0x03, 0x71, 0x00, 0x71, 0x3c, 0x91, 0x00, 0x91, 0x04
	.db	0x71, 0x00, 0x71, 0x3d, 0x91, 0x00, 0x91, 0x07, 0x71, 0x00
	.db	0x71, 0x60, 0x91, 0x27, 0x91, 0x00, 0x71, 0x00, 0x71, 0x61
	.db	0x91, 0x00, 0x91, 0x01, 0x71, 0x00, 0x71, 0x6a, 0x91, 0x00
	.db	0x91, 0x00, 0x71, 0x00, 0x71, 0x90, 0x91, 0x00, 0x91, 0x30
	.db	0x71, 0x00, 0x71, 0x95, 0x91, 0x02, 0x91, 0x1e, 0x71, 0x00
	.db	0x71, 0xff, 0x91, 0x00, 0x91, 0x01, 0x71, 0x00, 0x71, 0xb0
	.db	0x91, 0x2b, 0x91, 0x0c, 0x71, 0x00, 0x71, 0xff, 0x91, 0x00
	.db	0x91, 0x00, 0x71, 0x00, 0x71, 0x07, 0x91, 0x01, 0x91, 0x33
	.db	0x71, 0x00, 0x71, 0x22, 0xb4, 0xc0, 0xb4, 0xc0, 0xb0, 0x64
	.db	0xff
_custom_initseq_len::  .db  311

