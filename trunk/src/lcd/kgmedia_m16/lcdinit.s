	.include 'dpf.inc'

	.area LCDAUX (CODE)

_lcd_custom_init::
	mov	p3dir,#0x0
	anl	p1dir,#0xe8
	anl	p2dir,#0xfd
	setb	LCD_CS
	clr	LCD_RST
	mov	a,#0x96
	lcall	X15f3
	setb	LCD_RST
	clr	LCD_CS
	mov	a,#0x96
	lcall	X15f3
;
;	mov	r7,#0x0
;	mov	a,#0x31
;	mov	dptr,#X1573
;	lcall	tramp_jsr
;	ret	
;
	mov	dptr,#_custom_initseq
	ljmp	_lcd_init_by_table
;
X15f3:	mov	r5,a
X15f4:	mov	r6,#0x18
X15f6:	mov	r7,#0xfa
X15f8:	djnz	r7,X15f8
	djnz	r6,X15f6
	djnz	r5,X15f4
	ret	
;
; If custom backlight handling is needed, uncomment the following label
; and set LCD_BACKLIGHT_CUSTOM in dpfmodel.h
; r3 contains brightness value (0 .. LCD_MAX_BRIGHTNESS_VALUE)
;
;_lcd_custom_setbacklight::

;
; If custom contrast handling is needed, uncomment the following label
; and set LCD_CONTRAST_CUSTOM in dpfmodel.h
; r3 contains contrast value (1 .. LCD_MAX_CONTRAST_VALUE)
;
;_lcd_custom_setcontrast::

	.area LCDAUX (CODE)


;backlight_table::
;	.db	If needed, put data for custom backlight handling here
;_custom_backlighttbl_len::  .db  . - backlight_table


;contrast_table::
;	.db	If needed, put data for custom contrast handling here
;_custom_contrasttbl_len::  .db  . - contrast_table

_custom_contrasttbl::
	.db	0x26, 0x30, 0x32, 0x34, 0x36, 0x38, 0x3a
_custom_contrasttbl_len::  .db  7

_custom_contrasttbl2::
	.db	0x71, 0x00, 0x71, 0x13, 0x91, 0x0c, 0x91, 0x00, 0xff
_custom_contrasttbl2_len::  .db  9

_custom_contrasttbl2_offsets::
	.db	0x07
_custom_contrasttbl2_offsets_len::  .db  1

_custom_backlighttbl::
	.db	0x00, 0x0c, 0x18, 0x24, 0x30, 0x3c, 0x48, 0x54, 0x60, 0x6c
	.db	0x78, 0x84, 0x90, 0x9c, 0xa8, 0xb4, 0xc0, 0xcc, 0xd8, 0xe4
	.db	0xf0, 0xfc
_custom_backlighttbl_len::  .db  22

_custom_backlighttbl2::
_custom_backlighttbl2_len::  .db  0

_custom_initseq::
	.db	0x71, 0x01, 0xb0, 0x64, 0x71, 0x11, 0xb0, 0x96, 0x71, 0xb1
	.db	0x93, 0x01, 0x08, 0x05, 0x71, 0xb2, 0x93, 0x02, 0x23, 0x22
	.db	0x71, 0xb3, 0x96, 0x02, 0x23, 0x22, 0x02, 0x23, 0x22, 0x71
	.db	0xb4, 0x91, 0x03, 0x71, 0xc0, 0x93, 0x82, 0x14, 0x84, 0x71
	.db	0xc2, 0x92, 0x0a, 0x00, 0x71, 0xc3, 0x92, 0x8a, 0x2e, 0x71
	.db	0xc4, 0x92, 0x8a, 0xaa, 0x71, 0xc5, 0x91, 0x0b, 0x71, 0x3a
	.db	0x91, 0x05, 0x71, 0x36, 0x91, 0xc0, 0x71, 0xe0, 0x9f, 0x03
	.db	0x15, 0x0c, 0x12, 0x3a, 0x32, 0x2b, 0x2d, 0x2b, 0x28, 0x30
	.db	0x3c, 0x00, 0x02, 0x03, 0x71, 0xe1, 0x9f, 0x03, 0x15, 0x0c
	.db	0x12, 0x27, 0x25, 0x21, 0x28, 0x28, 0x27, 0x30, 0x3c, 0x00
	.db	0x01, 0x03, 0x71, 0x2a, 0x94, 0x00, 0x02, 0x00, 0x81, 0x71
	.db	0x2b, 0x94, 0x00, 0x01, 0x00, 0x80, 0x71, 0x29, 0xb0, 0x78
	.db	0x71, 0x2c, 0xff
_custom_initseq_len::  .db  123

