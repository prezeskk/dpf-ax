	.include 'dpf.inc'

	.area LCDAUX (CODE)

_lcd_custom_init::
	lcall	lcd_reset
;
	mov	dptr,#_custom_initseq
	ljmp	_lcd_init_by_table

;
; If custom backlight handling is needed, uncomment the following label
; and set LCD_BACKLIGHT_CUSTOM in dpfmodel.h
; r3 contains brightness value (0 .. LCD_MAX_BRIGHTNESS_VALUE)
;
_lcd_custom_setbacklight::
	mov	a,r3
	jnz	doset
	ret
doset:	mov	dptr,#_custom_backlighttbl
	dec	a
	movc	a,@a+dptr
	xch	a,b
	mov	a,#0x33
	clr	c
	subb	a,b
	mov	_tmr1perl,#0x33
	mov	_tmr1perh,#0x0
	mov	_tmr1pwml,a
	mov	_tmr1pwmh,#0x0
	ret

;_lcd_custom_setcontrast::
;	ret
;

	.area LCDAUX (CODE)


;backlight_table::
;	.db	If needed, put data for custom backlight handling here
;_custom_backlighttbl_len::  .db  . - backlight_table


;contrast_table::
;	.db	If needed, put data for custom contrast handling here
;_custom_contrasttbl_len::  .db  . - contrast_table

;
; NOTE from identify.py: not used
;
;_custom_contrasttbl::
;	.db	0x26, 0x30, 0x32, 0x34, 0x36, 0x38, 0x3a
;_custom_contrasttbl_len::  .db  7

;_custom_contrasttbl2::
;	.db	0x71, 0x25, 0x91, 0x26, 0xff
;_custom_contrasttbl2_len::  .db  5

;_custom_contrasttbl2_offsets::
;	.db	0x05
;_custom_contrasttbl2_offsets_len::  .db  1

_custom_backlighttbl::
	.db	0x32, 0x2f, 0x2d, 0x2b, 0x28, 0x25, 0x23, 0x21, 0x1e, 0x1b
	.db	0x19, 0x16, 0x14, 0x12, 0x0f, 0x0d, 0x0b, 0x09, 0x07, 0x05
	.db	0x02
_custom_backlighttbl_len::  .db  21

_custom_backlighttbl2::
_custom_backlighttbl2_len::  .db  0

_custom_initseq::
	.db	0x00, 0x10, 0xb0, 0x96, 0x11, 0xb0, 0x96, 0x72, 0x00, 0x01
	.db	0x92, 0x00, 0x00, 0x72, 0x00, 0x02, 0x92, 0x00, 0x00, 0x72
	.db	0x00, 0x03, 0x92, 0x10, 0x98, 0x72, 0x00, 0x04, 0x92, 0x00
	.db	0x00, 0x72, 0x00, 0x08, 0x92, 0x02, 0x02, 0x72, 0x00, 0x09
	.db	0x92, 0x00, 0x00, 0x72, 0x00, 0x0a, 0x92, 0x00, 0x08, 0x72
	.db	0x00, 0x0d, 0x92, 0x00, 0x00, 0x72, 0x00, 0x10, 0x92, 0x00
	.db	0x00, 0x72, 0x00, 0x11, 0x92, 0x00, 0x07, 0x72, 0x00, 0x12
	.db	0x92, 0x00, 0x00, 0x72, 0x00, 0x13, 0x92, 0x00, 0x00, 0xb0
	.db	0x64, 0x72, 0x00, 0x10, 0x92, 0x14, 0x90, 0xb0, 0x64, 0x72
	.db	0x00, 0x11, 0x92, 0x02, 0x23, 0xb0, 0x32, 0x72, 0x00, 0x12
	.db	0x92, 0x00, 0x81, 0xb0, 0x64, 0x72, 0x00, 0x13, 0x92, 0x15
	.db	0x00, 0x72, 0x00, 0x29, 0x92, 0x00, 0x15, 0x72, 0x00, 0x2b
	.db	0x92, 0x00, 0x0e, 0xb0, 0x64, 0x72, 0x00, 0x20, 0x92, 0x00
	.db	0x00, 0x72, 0x00, 0x21, 0x92, 0x00, 0x00, 0x72, 0x00, 0x30
	.db	0x92, 0x00, 0x00, 0x72, 0x00, 0x31, 0x92, 0x07, 0x06, 0x72
	.db	0x00, 0x32, 0x92, 0x01, 0x07, 0x72, 0x00, 0x35, 0x92, 0x05
	.db	0x04, 0x72, 0x00, 0x36, 0x92, 0x02, 0x00, 0x72, 0x00, 0x37
	.db	0x92, 0x00, 0x06, 0x72, 0x00, 0x38, 0x92, 0x01, 0x00, 0x72
	.db	0x00, 0x39, 0x92, 0x07, 0x07, 0x72, 0x00, 0x3c, 0x92, 0x04
	.db	0x05, 0x72, 0x00, 0x3d, 0x92, 0x00, 0x00, 0x72, 0x00, 0x50
	.db	0x92, 0x00, 0xef, 0x72, 0x00, 0x51, 0x92, 0x00, 0x00, 0x72
	.db	0x00, 0x52, 0x92, 0x01, 0x3f, 0x72, 0x00, 0x53, 0x92, 0x00
	.db	0x00, 0x72, 0x00, 0x60, 0x92, 0x27, 0x00, 0x72, 0x00, 0x61
	.db	0x92, 0x00, 0x01, 0x72, 0x00, 0x6a, 0x92, 0x00, 0x00, 0x72
	.db	0x00, 0x80, 0x92, 0x00, 0x00, 0x72, 0x00, 0x81, 0x92, 0x00
	.db	0x00, 0x72, 0x00, 0x82, 0x92, 0x00, 0x00, 0x72, 0x00, 0x83
	.db	0x92, 0x00, 0x00, 0x72, 0x00, 0x84, 0x92, 0x00, 0x00, 0x72
	.db	0x00, 0x85, 0x92, 0x00, 0x00, 0x72, 0x00, 0x90, 0x92, 0x00
	.db	0x10, 0x72, 0x00, 0x92, 0x92, 0x00, 0x00, 0x72, 0x00, 0x93
	.db	0x92, 0x00, 0x03, 0x72, 0x00, 0x95, 0x92, 0x01, 0x10, 0x72
	.db	0x00, 0x97, 0x92, 0x00, 0x00, 0x72, 0x00, 0x98, 0x92, 0x00
	.db	0x00, 0x72, 0x00, 0x07, 0x92, 0x01, 0x33, 0xf0, 0x0c, 0xff
_custom_initseq_len::  .db  320

