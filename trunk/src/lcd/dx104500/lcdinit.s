	.include 'dpf.inc'

	.area LCDAUX (CODE)

_lcd_custom_init::
	mov	p3dir,#0x0
	anl	p1dir,#0xe8
	anl	p2dir,#0xfd
	clr	LCD_CS
	clr	LCD_RST
	mov	a,#0x96
	lcall	X1550
	setb	LCD_RST
	mov	a,#0x96
	lcall	X1550
;
	mov	dptr,#_custom_initseq
	ljmp	_lcd_init_by_table

X1550:	mov	r5,a
X1551:	mov	r6,#0x18
X1553:	mov	r7,#0xfa
X1555:	djnz	r7,X1555
	djnz	r6,X1553
	djnz	r5,X1551
	ret	
;
	.area LCDAUX (CODE)

_custom_lcdcontrasttbl::
  .db  0x01, 0x07, 0x26, 0x30, 0x32, 0x34, 0x36, 0x38, 0x3a
_custom_lcdcontrasttbl_len::  .db  9

_custom_contrasttbl2::
  .db  0xdb, 0x14, 0x04, 0x71, 0x25, 0x91, 0x26
_custom_contrasttbl2_len::  .db  7

;
; This is the "original" backlighttbl.
; Will not work, because only values 0 .. 12 are valid
; and backlight needs a certain frequency
;
;_custom_backlighttbl::
;  .db  0x00, 0x0c, 0x18, 0x24, 0x30, 0x3c, 0x48, 0x54, 0x60, 0x6c
;  .db  0x78, 0x84, 0x90, 0x9c, 0xa8, 0xb4, 0xc0, 0xcc, 0xd8, 0xe4
;  .db  0xf0, 0xfc
;_custom_backlighttbl_len::  .db  22


;_custom_backlighttbl::
  .db  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
  .db  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
  .db  0xff, 0xff
;_custom_backlighttbl_len::  .db  22

;_custom_backlighttbl2::
  .db  0x00, 0x06, 0x0c, 0x12, 0x18, 0x1e, 0x24, 0x2a, 0x30, 0x36
  .db  0x3c, 0x42, 0x48, 0x4e, 0x54, 0x5a, 0x60, 0x66, 0x6c, 0x72
  .db  0x78, 0x7e
;_custom_backlighttbl2_len::  .db  22

_custom_backlighttbl::
  .db  0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f
  .db  0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f
  .db  0x7f, 0x7f
_custom_backlighttbl_len::  .db  22

_custom_backlighttbl2::
  .db  0x00, 0x03, 0x06, 0x09, 0x0c, 0x0f, 0x12, 0x15, 0x18, 0x1b
  .db  0x1e, 0x21, 0x24, 0x27, 0x2a, 0x2d, 0x30, 0x33, 0x36, 0x39
  .db  0x3c, 0x3f
_custom_backlighttbl2_len::  .db  22

_custom_initseq::
  .db  0x72, 0x00, 0x00, 0x92, 0x00, 0x01, 0xb0, 0x96, 0x72, 0x00
  .db  0x01, 0x92, 0x00, 0x00, 0x72, 0x10, 0x00, 0x92, 0x17, 0x90
  .db  0x72, 0x00, 0x60, 0x92, 0x27, 0x00, 0x72, 0x00, 0x61, 0x92
  .db  0x00, 0x01, 0x72, 0x00, 0x46, 0x92, 0x00, 0x02, 0x72, 0x00
  .db  0x13, 0x92, 0x80, 0x10, 0x72, 0x00, 0x12, 0x92, 0x80, 0xfe
  .db  0x72, 0x00, 0x02, 0x92, 0x05, 0x00, 0x72, 0x00, 0x03, 0x92
  .db  0x10, 0x98, 0x72, 0x00, 0x20, 0x92, 0x00, 0xef, 0x72, 0x00
  .db  0x21, 0x92, 0x01, 0x3f, 0x72, 0x00, 0x30, 0x92, 0x03, 0x03
  .db  0x72, 0x00, 0x31, 0x92, 0x03, 0x03, 0x72, 0x00, 0x32, 0x92
  .db  0x03, 0x03, 0x72, 0x00, 0x33, 0x92, 0x03, 0x00, 0x72, 0x00
  .db  0x34, 0x92, 0x00, 0x03, 0x72, 0x00, 0x35, 0x92, 0x03, 0x03
  .db  0x72, 0x00, 0x36, 0x92, 0x00, 0x14, 0x72, 0x00, 0x37, 0x92
  .db  0x03, 0x03, 0x72, 0x00, 0x38, 0x92, 0x03, 0x03, 0x72, 0x00
  .db  0x39, 0x92, 0x03, 0x03, 0x72, 0x00, 0x3a, 0x92, 0x03, 0x00
  .db  0x72, 0x00, 0x3b, 0x92, 0x00, 0x03, 0x72, 0x00, 0x3c, 0x92
  .db  0x03, 0x03, 0x72, 0x00, 0x3d, 0x92, 0x14, 0x00, 0x72, 0x00
  .db  0x92, 0x92, 0x02, 0x00, 0x72, 0x00, 0x93, 0x92, 0x03, 0x03
  .db  0x72, 0x00, 0x90, 0x92, 0x08, 0x0d, 0x72, 0x00, 0x07, 0x92
  .db  0x01, 0x73, 0x72, 0x00, 0x22, 0xff
_custom_initseq_len::  .db  186

